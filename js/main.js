let arrOfImg=[];for(let e=1;e<=49;e++)arrOfImg.push(`./upload/products-img/File${e}.jpg`);let landing=document.querySelector(".landing"),out=(landing&&setInterval(()=>{var e=Math.floor(Math.random()*arrOfImg.length);landing.style.backgroundImage=`url(${arrOfImg[e]})`},1e4),document.querySelector(".out")),up=document.querySelector(".out .up"),a=document.querySelectorAll("header .container .links ul li a");function loadProducts(e,y,t,S,f){let w=document.querySelector(e);fetch(t).then(e=>e.json()).then(n=>{if(4==y){let t=Math.floor(Math.random()*Math.abs(n.products.length));for(let e=t=t+4>n.products.length?n.products.length-4:t;e<t+4;e++){var r=document.createElement("div"),l=document.createElement("img"),o=document.createElement("div"),a=document.createElement("div"),c=document.createElement("p"),d=document.createElement("span"),i=document.createElement("span"),u=document.createElement("button");o.className="img",l.src=1===S?n.products[e].img:"."+n.products[e].img,a.className="info",r.className="card",u.addEventListener("click",function(){window.location=1===f?"./html/cart.html?id="+n.products[e].id:"cart.html?id="+n.products[e].id}),c.innerHTML=n.products[e].name,d.innerHTML=n.products[e].price+" ج",1==n.products[e].available?i.innerHTML="متاح":(r.classList.add("not-available"),i.innerHTML="غير متاح"),u.innerHTML="شوف المنتج",o.appendChild(l),a.appendChild(c),a.appendChild(d),a.appendChild(i),a.appendChild(u),r.appendChild(o),r.appendChild(a),w.appendChild(r)}}else if("all"==y)for(let e=0;e<n.products.length;e++){var t=document.createElement("div"),s=document.createElement("img"),m=document.createElement("div"),p=document.createElement("div"),h=document.createElement("p"),b=document.createElement("span"),g=document.createElement("span"),v=document.createElement("button");m.className="img",s.src="."+n.products[e].img,p.className="info",t.className="card",h.innerHTML=n.products[e].name,b.innerHTML=n.products[e].price+" ج",1==n.products[e].available?g.innerHTML="متاح":(t.classList.add("not-available"),g.innerHTML="غير متاح",t.disabled=!0,v.disabled=!0),v.innerHTML="شوف المنتج",v.addEventListener("click",function(){window.location=1===f?"./html/cart.html?id="+n.products[e].id:"cart.html?id="+n.products[e].id}),m.appendChild(s),p.appendChild(h),p.appendChild(b),p.appendChild(g),p.appendChild(v),t.appendChild(m),t.appendChild(p),w.appendChild(t)}})}3===a.length?(a[0].addEventListener("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:750},"slow")}),a[1].addEventListener("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:1300},"slow")}),a[2].addEventListener("click",function(e){e.preventDefault(),window.location="./html/end.html"})):2===a.length?(a[0].addEventListener("click",function(e){1<window.history.length?window.history.back():alert("No previous page found.")}),a[1].addEventListener("click",function(e){e.preventDefault(),window.location="../html/end.html"})):1===a.length&&a[0].addEventListener("click",function(e){window.location="../index.html"}),up&&(up.addEventListener("click",()=>{$("html, body").animate({scrollTop:0},"slow")}),window.addEventListener("scroll",function(e){400<=scrollY?out.classList.remove("hidden"):out.classList.add("hidden")})),document.querySelector(".prouducts")&&loadProducts(".prouducts .container .container-cards",4,"./product.json",1,1),document.querySelector(".cart")&&loadProducts(".cart .container .container-cards",4,"../product.json",2,2),document.querySelector(".prouductAll")&&loadProducts(".prouductAll .container .container-cards","all","../product.json",2,2);let parames=new URLSearchParams(window.location.search),Id,productsArr=(new URLSearchParams(window.location.search)&&(Id=parames.get("id")),[]),totle=0;if(document.querySelector(".details .info .counter input")&&fetch("../product.json").then(e=>e.json()).then(t=>{let n;for(let e=0;e<t.products.length;e++)t.products[e].id==Number(Id)&&(document.querySelector(".details .info .title span").innerHTML=t.products[e].name,document.querySelector(".details .img img").src="."+t.products[e].img,document.querySelector(".details .info .price span").innerHTML="ج"+t.products[e].price,n=t.products[e].price);let e=document.querySelector(".details .info .price span"),r=1,l=document.querySelector(".details .info .counter input");l.value=r;var o=document.querySelectorAll(".details .info .counter span");o[0].addEventListener("click",()=>{r--,l.value=r,e.innerHTML="ج"+(Number(e.innerHTML.split("").slice(1).join(""))-n),l.value<=0&&(l.value=r),l.value=r}),o[1].addEventListener("click",()=>{r++,l.value=r,e.innerHTML="ج"+n*r});let a=document.querySelector(".details .info a");a&&(a.setAttribute("data-id",Number(Id)),a.addEventListener("click",()=>{var e=JSON.parse(window.localStorage.getItem("Products-local")||"[]"),e=(productsArr=Array.isArray(e)?e:[],t.products.find(e=>e.id===Number(a.getAttribute("data-id"))));e&&(productsArr.push(e),window.localStorage.setItem("Products-local",JSON.stringify(productsArr))),window.location="./end.html"}))}),window.localStorage.getItem("Products-local")&&document.querySelector("table tbody")){let u=JSON.parse(window.localStorage.getItem("Products-local")),s=document.querySelector("table tbody");for(let i=0;i<u.length;i++){let r=document.createElement("tr"),e=document.createElement("td"),t=document.createElement("td"),n=document.createElement("td"),l=document.createElement("span"),o=document.createElement("input"),a=document.createElement("td"),c=document.createElement("span"),d=document.createElement("img");r.setAttribute("id",u[i].id),r.setAttribute("class","s"+u[i].id),l.innerHTML="x",l.className="close",d.src="."+u[i].img,o.type="number",o.value="1",o.maxLength="1",a.className="Subtotal",t.className="price",t.innerText="ج"+u[i].price,c.className="title",n.className="Quantity",c.innerHTML=u[i].name,e.className="flex",a.innerHTML="ج"+u[i].price,e.appendChild(l),n.appendChild(o),e.appendChild(d),e.appendChild(c),r.appendChild(e),r.appendChild(t),r.appendChild(n),r.appendChild(a),s.appendChild(r),o.addEventListener("input",e=>{var t=r.getAttribute("class");document.querySelector(`table tbody tr.${t} td.Subtotal`).innerHTML="$"+Number(e.target.value)*u[i].price}),l.addEventListener("click",()=>{let t=r.getAttribute("id"),e=JSON.parse(window.localStorage.getItem("Products-local"));console.log(e);var n=r.getAttribute("class"),n=document.querySelector(`table tbody tr.${n} td.Subtotal`).innerHTML,n=Number(n.split("").slice(1).join(""));document.querySelector(".table .container .box div .price").innerText="ج"+(totle-n),totle-=n,e=e.filter(e=>e.id!==Number(t)),window.localStorage.setItem("Products-local",JSON.stringify(e)),r.remove()})}}document.querySelector(".table .container .box div span.price")&&window.addEventListener("load",()=>{var e=document.querySelectorAll("table tbody tr td.Subtotal");totle=0,e.forEach(e=>{e=Number(e.innerHTML.split("ج")[1]);totle+=e}),document.querySelector(".table .container .box div .price").innerText="ج"+totle});let done=document.querySelector(".table .container .box a.done"),search=(done&&done.addEventListener("click",()=>{if(0===document.querySelectorAll("table tbody tr").length)alert("انت لم تقم باختيار أي منتج");else{var n=JSON.parse(window.localStorage.getItem("Products-local"));let t=0;var r=[];for(let e=0;e<n.length;e++){var l=n[e].name,o=n[e].price;t+=o,r.push(`المنتج: ${l}  السعر: ${o} ج |`)}window.localStorage.clear(),window.location.href=`https://wa.me/2001147053373?text= ${r.join("\n")} | ${t}  السعر الكلي ج`}}),document.querySelector(".table .container .back-updata a.Up")&&document.querySelector(".table .container .back-updata a.Up").addEventListener("click",e=>{e.preventDefault();e=document.querySelectorAll("table tbody tr td.Subtotal");totle=0,e.forEach(e=>{e=Number(e.innerHTML.split("ج")[1]);console.log(e),totle+=e}),document.querySelector(".table .container .box div .price").innerText="ج"+totle}),document.querySelector(".prouductAll .container input[type='search']"));search&&search.addEventListener("input",e=>{let t=e.target.value.toLowerCase();document.querySelectorAll(".prouductAll .container .container-cards .card").forEach(e=>{e.querySelector(".info p").innerText.toLowerCase().includes(t)?e.style.display="block":e.style.display="none"})});